"use strict";var cov_in3x8zhwd=function(){var path="/Users/psantos/Desktop/IWA/CA/src/backend/controllers/user_controller.ts",hash="793b975e9b9550dfd7b44c9149c8dcb7a6c10a25",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/psantos/Desktop/IWA/CA/src/backend/controllers/user_controller.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:16},end:{line:3,column:34}},"2":{start:{line:4,column:24},end:{line:4,column:66}},"3":{start:{line:5,column:17},end:{line:5,column:35}},"4":{start:{line:6,column:0},end:{line:6,column:32}},"5":{start:{line:8,column:0},end:{line:16,column:3}},"6":{start:{line:9,column:25},end:{line:9,column:58}},"7":{start:{line:10,column:4},end:{line:15,column:7}},"8":{start:{line:11,column:8},end:{line:11,column:23}},"9":{start:{line:13,column:8},end:{line:13,column:24}},"10":{start:{line:14,column:8},end:{line:14,column:28}},"11":{start:{line:18,column:0},end:{line:52,column:3}},"12":{start:{line:19,column:25},end:{line:19,column:58}},"13":{start:{line:21,column:20},end:{line:21,column:34}},"14":{start:{line:22,column:19},end:{line:22,column:36}},"15":{start:{line:23,column:4},end:{line:26,column:5}},"16":{start:{line:24,column:8},end:{line:24,column:24}},"17":{start:{line:25,column:8},end:{line:25,column:50}},"18":{start:{line:29,column:4},end:{line:32,column:7}},"19":{start:{line:46,column:4},end:{line:51,column:7}},"20":{start:{line:47,column:8},end:{line:47,column:23}},"21":{start:{line:49,column:8},end:{line:49,column:24}},"22":{start:{line:50,column:8},end:{line:50,column:28}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:20},end:{line:8,column:21}},loc:{start:{line:8,column:40},end:{line:16,column:1}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:31},end:{line:10,column:32}},loc:{start:{line:10,column:47},end:{line:12,column:5}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:12,column:13},end:{line:12,column:14}},loc:{start:{line:12,column:26},end:{line:15,column:5}},line:12},"3":{name:"(anonymous_3)",decl:{start:{line:18,column:21},end:{line:18,column:22}},loc:{start:{line:18,column:41},end:{line:52,column:1}},line:18},"4":{name:"(anonymous_4)",decl:{start:{line:46,column:40},end:{line:46,column:41}},loc:{start:{line:46,column:56},end:{line:48,column:5}},line:46},"5":{name:"(anonymous_5)",decl:{start:{line:48,column:13},end:{line:48,column:14}},loc:{start:{line:48,column:26},end:{line:51,column:5}},line:48}},branchMap:{"0":{loc:{start:{line:23,column:4},end:{line:26,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:26,column:5}},{start:{line:23,column:4},end:{line:26,column:5}}],line:23}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_in3x8zhwd.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var express_1=(cov_in3x8zhwd.s[1]++,require("express"));var user_repository_1=(cov_in3x8zhwd.s[2]++,require("../repositories/user_repository"));var userRouter=(cov_in3x8zhwd.s[3]++,express_1.Router());cov_in3x8zhwd.s[4]++;exports.userRouter=userRouter;// Retruns all users
cov_in3x8zhwd.s[5]++;userRouter.get("/",function(req,res){cov_in3x8zhwd.f[0]++;var userRepository=(cov_in3x8zhwd.s[6]++,user_repository_1.getRepository());cov_in3x8zhwd.s[7]++;userRepository.find().then(function(user){cov_in3x8zhwd.f[1]++;cov_in3x8zhwd.s[8]++;res.json(user);}).catch(function(e){cov_in3x8zhwd.f[2]++;cov_in3x8zhwd.s[9]++;res.status(500);cov_in3x8zhwd.s[10]++;res.send(e.message);});});// Creates a new user account
cov_in3x8zhwd.s[11]++;userRouter.post("/",function(req,res){cov_in3x8zhwd.f[3]++;var userRepository=(cov_in3x8zhwd.s[12]++,user_repository_1.getRepository());//const newUser = req.body;
var userEmail=(cov_in3x8zhwd.s[13]++,req.body.email);var userPass=(cov_in3x8zhwd.s[14]++,req.body.password);cov_in3x8zhwd.s[15]++;if(!userEmail){cov_in3x8zhwd.b[0][0]++;cov_in3x8zhwd.s[16]++;res.status(400);cov_in3x8zhwd.s[17]++;res.send("Invalid Username or Password!");}else{cov_in3x8zhwd.b[0][1]++;}//console.log(newUser.email);
//const userRepository = conn.getRepository(User);
cov_in3x8zhwd.s[18]++;userRepository.save({email:userEmail,password:userPass});// Check if the email is already taken
// const userCheck = userRepository.findOne({
//     where: {
//         email: newUser.email,
//         password: newUser.password
//     }
// });
// Return error 400 in case email has already been taken
// if (userCheck) {
//     res.status(400);
//     res.send(`Email already taken, please try another one.`);
// }
// Return the new user object.
cov_in3x8zhwd.s[19]++;userRepository.find(userEmail).then(function(user){cov_in3x8zhwd.f[4]++;cov_in3x8zhwd.s[20]++;res.json(user);}).catch(function(e){cov_in3x8zhwd.f[5]++;cov_in3x8zhwd.s[21]++;res.status(500);cov_in3x8zhwd.s[22]++;res.send(e.message);});});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3BzYW50b3MvRGVza3RvcC9JV0EvQ0Evc3JjL2JhY2tlbmQvY29udHJvbGxlcnMvdXNlcl9jb250cm9sbGVyLnRzIiwic291cmNlcyI6WyIvVXNlcnMvcHNhbnRvcy9EZXNrdG9wL0lXQS9DQS9zcmMvYmFja2VuZC9jb250cm9sbGVycy91c2VyX2NvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtQ0FBb0Q7QUFDcEQsbUVBQWdFO0FBS2hFLElBQU0sVUFBVSxHQUFHLGdCQUFNLEVBQUUsQ0FBQztBQW9EbkIsZ0NBQVU7QUFuRG5CLG9CQUFvQjtBQUNwQixVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFVLEdBQUcsRUFBRSxHQUFHO0lBQ2xDLElBQU0sY0FBYyxHQUFHLCtCQUFhLEVBQUUsQ0FBQztJQUN2QyxjQUFjLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQUMsSUFBSTtRQUM1QixHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ25CLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxVQUFDLENBQVE7UUFDZCxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hCLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3hCLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUM7QUFFSCw2QkFBNkI7QUFDN0IsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsVUFBVSxHQUFHLEVBQUUsR0FBRztJQUNuQyxJQUFNLGNBQWMsR0FBRywrQkFBYSxFQUFFLENBQUM7SUFDdkMsMkJBQTJCO0lBQzNCLElBQU0sU0FBUyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ2pDLElBQU0sUUFBUSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ25DLElBQUcsQ0FBQyxTQUFTLEVBQUM7UUFDVixHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hCLEdBQUcsQ0FBQyxJQUFJLENBQUMsK0JBQStCLENBQUMsQ0FBQztLQUM3QztJQUNELDZCQUE2QjtJQUM3QixrREFBa0Q7SUFDbEQsY0FBYyxDQUFDLElBQUksQ0FBQztRQUNoQixLQUFLLEVBQUUsU0FBUztRQUNoQixRQUFRLEVBQUUsUUFBUTtLQUNyQixDQUFDLENBQUM7SUFFSCxzQ0FBc0M7SUFDdEMsNkNBQTZDO0lBQzdDLGVBQWU7SUFDZixnQ0FBZ0M7SUFDaEMscUNBQXFDO0lBQ3JDLFFBQVE7SUFDUixNQUFNO0lBRU4sd0RBQXdEO0lBQ3hELG1CQUFtQjtJQUNuQix1QkFBdUI7SUFDdkIsZ0VBQWdFO0lBQ2hFLElBQUk7SUFFSiw4QkFBOEI7SUFDOUIsY0FBYyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQyxJQUFJO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbkIsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQUMsQ0FBUTtRQUNkLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDaEIsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDeEIsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciwgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHsgZ2V0UmVwb3NpdG9yeSB9IGZyb20gJy4uL3JlcG9zaXRvcmllcy91c2VyX3JlcG9zaXRvcnknO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi9lbnRpdGllcy91c2VyXCI7XG5pbXBvcnQgeyBSZXBvc2l0b3J5IH0gZnJvbSBcInR5cGVvcm1cIjtcbmltcG9ydCAqIGFzIGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5cbmNvbnN0IHVzZXJSb3V0ZXIgPSBSb3V0ZXIoKTtcbi8vIFJldHJ1bnMgYWxsIHVzZXJzXG51c2VyUm91dGVyLmdldChcIi9cIiwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gICAgY29uc3QgdXNlclJlcG9zaXRvcnkgPSBnZXRSZXBvc2l0b3J5KCk7XG4gICAgdXNlclJlcG9zaXRvcnkuZmluZCgpLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgcmVzLmpzb24odXNlcik7XG4gICAgfSkuY2F0Y2goKGU6IEVycm9yKSA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKTtcbiAgICAgICAgcmVzLnNlbmQoZS5tZXNzYWdlKTtcbiAgICB9KTtcbn0pO1xuXG4vLyBDcmVhdGVzIGEgbmV3IHVzZXIgYWNjb3VudFxudXNlclJvdXRlci5wb3N0KFwiL1wiLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICBjb25zdCB1c2VyUmVwb3NpdG9yeSA9IGdldFJlcG9zaXRvcnkoKTtcbiAgICAvL2NvbnN0IG5ld1VzZXIgPSByZXEuYm9keTtcbiAgICBjb25zdCB1c2VyRW1haWwgPSByZXEuYm9keS5lbWFpbDtcbiAgICBjb25zdCB1c2VyUGFzcyA9IHJlcS5ib2R5LnBhc3N3b3JkO1xuICAgIGlmKCF1c2VyRW1haWwpe1xuICAgICAgICByZXMuc3RhdHVzKDQwMCk7XG4gICAgICAgIHJlcy5zZW5kKGBJbnZhbGlkIFVzZXJuYW1lIG9yIFBhc3N3b3JkIWApO1xuICAgIH0gXG4gICAgLy9jb25zb2xlLmxvZyhuZXdVc2VyLmVtYWlsKTtcbiAgICAvL2NvbnN0IHVzZXJSZXBvc2l0b3J5ID0gY29ubi5nZXRSZXBvc2l0b3J5KFVzZXIpO1xuICAgIHVzZXJSZXBvc2l0b3J5LnNhdmUoeyBcbiAgICAgICAgZW1haWw6IHVzZXJFbWFpbCwgXG4gICAgICAgIHBhc3N3b3JkOiB1c2VyUGFzcyxcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGlmIHRoZSBlbWFpbCBpcyBhbHJlYWR5IHRha2VuXG4gICAgLy8gY29uc3QgdXNlckNoZWNrID0gdXNlclJlcG9zaXRvcnkuZmluZE9uZSh7XG4gICAgLy8gICAgIHdoZXJlOiB7XG4gICAgLy8gICAgICAgICBlbWFpbDogbmV3VXNlci5lbWFpbCxcbiAgICAvLyAgICAgICAgIHBhc3N3b3JkOiBuZXdVc2VyLnBhc3N3b3JkXG4gICAgLy8gICAgIH1cbiAgICAvLyB9KTtcblxuICAgIC8vIFJldHVybiBlcnJvciA0MDAgaW4gY2FzZSBlbWFpbCBoYXMgYWxyZWFkeSBiZWVuIHRha2VuXG4gICAgLy8gaWYgKHVzZXJDaGVjaykge1xuICAgIC8vICAgICByZXMuc3RhdHVzKDQwMCk7XG4gICAgLy8gICAgIHJlcy5zZW5kKGBFbWFpbCBhbHJlYWR5IHRha2VuLCBwbGVhc2UgdHJ5IGFub3RoZXIgb25lLmApO1xuICAgIC8vIH1cblxuICAgIC8vIFJldHVybiB0aGUgbmV3IHVzZXIgb2JqZWN0LlxuICAgIHVzZXJSZXBvc2l0b3J5LmZpbmQodXNlckVtYWlsKS50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgIHJlcy5qc29uKHVzZXIpO1xuICAgIH0pLmNhdGNoKChlOiBFcnJvcikgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCk7XG4gICAgICAgIHJlcy5zZW5kKGUubWVzc2FnZSk7XG4gICAgfSk7XG59KTtcblxuZXhwb3J0IHsgdXNlclJvdXRlciB9OyJdfQ==